var i=Object.defineProperty;var r=(a,e,o)=>e in a?i(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o;var c=(a,e,o)=>r(a,typeof e!="symbol"?e+"":e,o);import{G as d,g as l}from"./pdfjs-BnRl7pXp.js";const t=class t{constructor(){if(t.instance)return t.instance;d.workerSrc="/js/pdf.worker.min.js",this.documentCache=new Map,this.loadingPromises=new Map,t.instance=this,console.log("âœ… PDFDocumentManager initialized (Singleton)")}static getInstance(){return t.instance||(t.instance=new t),t.instance}async getDocument(e){if(this.documentCache.has(e)){const n=this.documentCache.get(e);return console.log(`ğŸ“„ Using cached PDF document: ${e}`),n.document}if(this.loadingPromises.has(e))return console.log(`â³ Waiting for PDF to finish loading: ${e}`),this.loadingPromises.get(e);console.log(`ğŸ“¥ Loading PDF document: ${e}`);const o=this.loadPdfDocument(e);this.loadingPromises.set(e,o);try{const n=await o;return this.documentCache.set(e,{document:n,loadedAt:new Date,url:e}),this.loadingPromises.delete(e),console.log(`âœ… PDF document loaded and cached: ${e}`),n}catch(n){throw this.loadingPromises.delete(e),console.error(`âŒ Failed to load PDF document: ${e}`,n),n}}async loadPdfDocument(e){return await l(e).promise}async getPage(e,o){return await(await this.getDocument(e)).getPage(o)}clearCache(e=null){e?(this.documentCache.delete(e),this.loadingPromises.delete(e),console.log(`ğŸ—‘ï¸ Cleared cache for: ${e}`)):(this.documentCache.clear(),this.loadingPromises.clear(),console.log("ğŸ—‘ï¸ Cleared all PDF document cache"))}getCacheStats(){return{cachedDocuments:this.documentCache.size,loadingDocuments:this.loadingPromises.size,cacheKeys:Array.from(this.documentCache.keys())}}async preload(e){try{await this.getDocument(e),console.log(`âœ… Preloaded PDF: ${e}`)}catch(o){console.error(`âŒ Failed to preload PDF: ${e}`,o)}}};c(t,"instance",null);let s=t;const h=s.getInstance();typeof window<"u"&&(window.PDFDocumentManager=s,window.pdfManager=h);export{s as P};
