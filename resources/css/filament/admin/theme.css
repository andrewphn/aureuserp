@import '../../../../vendor/filament/filament/resources/css/theme.css';
@import '../../tcs-brand-tokens.css';

@source '../../../../app/Filament/**/*';
@source '../../../../resources/views/filament/**/*';
@source '../../../../resources/views/components/**/*';
@source '../../../../plugins/webkul/*/resources/views/**/*';

@layer components {
    /* ============================================
       PROJECT TYPE CARDS
       ============================================ */

    /* Target the options grid directly */
    .fi-fo-checkbox-list-options.project-type-cards .fi-fo-checkbox-list-option-ctn {
        @apply mb-2;
    }

    .fi-fo-checkbox-list-options.project-type-cards .fi-fo-checkbox-list-option {
        @apply flex items-center p-4 border-2 border-gray-300 dark:border-gray-600
               rounded-lg bg-white dark:bg-gray-800 transition-all cursor-pointer;
    }

    .fi-fo-checkbox-list-options.project-type-cards .fi-fo-checkbox-list-option:hover {
        @apply border-gray-400 dark:border-gray-500;
    }

    .fi-fo-checkbox-list-options.project-type-cards .fi-fo-checkbox-list-option:has(input[type="checkbox"]:checked) {
        @apply bg-amber-500 border-amber-500 dark:bg-amber-600 dark:border-amber-600;
    }

    .fi-fo-checkbox-list-options.project-type-cards .fi-fo-checkbox-list-option:has(input[type="checkbox"]:checked) * {
        @apply text-white;
    }

    /* ============================================
       TCS METRIC CARD - Reusable component
       ============================================ */

    .tcs-metric-card {
        @apply rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow;
    }

    .tcs-metric-card-label {
        @apply text-[10px] font-semibold text-white/60 uppercase tracking-widest mb-3;
    }

    .tcs-metric-card-value {
        @apply text-6xl font-black text-white leading-none mb-3 tracking-tight;
    }

    .tcs-metric-card-unit {
        @apply text-xs font-bold text-white uppercase tracking-wider opacity-90;
    }

    /* ============================================
       FORM DESIGN - TCS Woodwork Clean Aesthetic
       Inspired by tcswoodwork.com minimal design
       ============================================ */

    /* Section Headers - Clean minimal style */
    .fi-section-header {
        @apply border-b border-gray-200 dark:border-gray-700 pb-3 mb-6;
    }

    .fi-section-header-heading {
        @apply text-lg font-medium text-gray-900 dark:text-gray-100;
    }

    /* Form sections - Minimal clean cards */
    .fi-section {
        @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-4;
    }

    /* Input fields - Clean minimal borders */
    .fi-input-wrapper input[type="text"],
    .fi-input-wrapper input[type="email"],
    .fi-input-wrapper input[type="number"],
    .fi-input-wrapper select,
    .fi-input-wrapper textarea {
        @apply border-gray-200 dark:border-gray-700
               focus:border-gray-400 dark:focus:border-gray-500
               focus:ring-0
               rounded-md transition-colors
               bg-white dark:bg-gray-900;
    }

    /* Select inputs - Minimal focus style */
    .fi-select-input {
        @apply rounded-md border-gray-200 dark:border-gray-700
               focus:border-gray-400 dark:focus:border-gray-500
               focus:ring-0
               transition-colors;
    }

    /* Field labels - Clean typography */
    .fi-fo-field-wrp-label label {
        @apply font-normal text-gray-700 dark:text-gray-300 text-sm mb-1.5;
    }

    /* Helper text - Subtle */
    .fi-fo-field-wrp-hint-text {
        @apply text-xs text-gray-500 dark:text-gray-500 mt-1;
    }

    /* Radio and checkbox groups - Clean spacing */
    .fi-fo-radio-list,
    .fi-fo-checkbox-list {
        @apply space-y-2;
    }

    /* Radio/checkbox options - Minimal card style like TCS website */
    .fi-fo-radio-list-option,
    .fi-fo-checkbox-list-option {
        @apply border border-gray-200 dark:border-gray-700
               rounded-md p-3 transition-all duration-150
               hover:border-gray-300 dark:hover:border-gray-600
               bg-white dark:bg-gray-900;
    }

    .fi-fo-radio-list-option:has(input:checked),
    .fi-fo-checkbox-list-option:has(input:checked) {
        @apply border-gray-400 dark:border-gray-500 bg-gray-50 dark:bg-gray-800;
    }

    /* Form grid - Better spacing */
    .fi-fo-grid {
        @apply gap-5;
    }

    /* Fieldset groups - Minimal styling */
    .fi-fieldset {
        @apply bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700
               rounded-lg p-4 mb-4;
    }

    .fi-fieldset-header {
        @apply mb-3 pb-2 border-b border-gray-200 dark:border-gray-700;
    }

    /* Disabled inputs - Subtle indication */
    .fi-input-wrapper input:disabled,
    .fi-input-wrapper select:disabled,
    .fi-input-wrapper textarea:disabled {
        @apply bg-gray-50 dark:bg-gray-900 text-gray-400 dark:text-gray-600 cursor-not-allowed;
    }

    /* Toggle switches - Minimal accent */
    .fi-toggle {
        @apply focus:ring-0 focus:ring-offset-0 checked:bg-gray-800 dark:checked:bg-gray-600;
    }

    /* ============================================
       PDF ANNOTATION TREE HIERARCHY
       ============================================ */

    /* Tree hierarchy indentation with connecting lines */
    .tree-hierarchy-indent {
        @apply ml-5 mt-1 pl-3 border-l-2 border-gray-300 dark:border-gray-600;
    }

    /* ============================================
       PDF ANNOTATION DYNAMIC POSITIONING
       For intelligent label/button positioning
       ============================================ */

    .-top-2 {
        top: -0.5rem !important;
    }

    .-top-7 {
        top: -1.75rem !important;
    }

    .-bottom-2 {
        bottom: -0.5rem !important;
    }

    .-bottom-7 {
        bottom: -1.75rem !important;
    }

    .-left-2 {
        left: -0.5rem !important;
    }

    .left-0 {
        left: 0 !important;
    }

    .-right-2 {
        right: -0.5rem !important;
    }

    .right-0 {
        right: 0 !important;
    }

    .top-0 {
        top: 0 !important;
    }

    .bottom-0 {
        bottom: 0 !important;
    }

    /* ============================================
       PDF ANNOTATION MARKER TRANSITIONS
       For instant resize/move responsiveness
       ============================================ */

    /* Default smooth transitions for annotations */
    .annotation-marker {
        transition: all 0.2s;
    }

    /* Disable transitions during active resize/move for instant responsiveness */
    .annotation-marker.annotation-active {
        transition: none !important;
    }

    /* ============================================
       TCS WIZARD STEP BAR - Scalable & Color-Coded
       Phase colors with gradient palette (dark to light)
       ============================================ */

    /* Override wizard header to scale instead of scroll */
    /* Note: Removed overflow-hidden as it was clipping Filament's Floating UI dropdowns */
    .fi-sc-wizard-header {
        @apply flex flex-wrap md:flex-nowrap !important;
    }

    /* Make steps flexible and scale to fit */
    .fi-sc-wizard-header .fi-sc-wizard-header-step {
        @apply flex-1 min-w-0 !important;
    }

    /* Reduce padding on step buttons for better fit */
    .fi-sc-wizard-header .fi-sc-wizard-header-step-btn {
        @apply px-3 py-3 gap-x-2 !important;
    }

    /* Allow step text to shrink and truncate */
    .fi-sc-wizard-header .fi-sc-wizard-header-step-text {
        @apply w-auto max-w-none min-w-0 !important;
    }

    /* Truncate long labels */
    .fi-sc-wizard-header .fi-sc-wizard-header-step-label {
        @apply truncate text-xs !important;
    }

    /* Smaller description text */
    .fi-sc-wizard-header .fi-sc-wizard-header-step-description {
        @apply truncate text-[11px] !important;
    }

    /* Smaller icons for better fit */
    .fi-sc-wizard-header .fi-sc-wizard-header-step-icon-ctn {
        @apply size-8 !important;
    }

    .fi-sc-wizard-header .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        @apply size-4 !important;
    }

    /* Hide separator arrows on smaller screens */
    @media (max-width: 1280px) {
        .fi-sc-wizard-header .fi-sc-wizard-header-step-separator {
            @apply hidden !important;
        }
    }

    /* ============================================
       TCS PHASE COLOR SYSTEM - CSS Custom Properties
       Matching database stage colors with sub-stage gradients

       Main Stages (from projects_project_stages):
       - Discovery: #3B82F6 (Blue)
       - Design: #8B5CF6 (Purple)
       - Sourcing: #F59E0B (Amber)
       - Production: #10B981 (Green)
       - Delivery: #14B8A6 (Teal)

       Sub-stages: 5-shade gradient (darkest to lightest)
       - 900: Deep (pre-active)
       - 700: Dark (active/current)
       - 500: Base (primary stage color)
       - 300: Light (completed recent)
       - 100: Lightest (pending)
       ============================================ */
    :root {
        /* Discovery (Blue) - Trust, communication, beginning */
        --tcs-discovery-900: #1e3a8a;
        --tcs-discovery-700: #1d4ed8;
        --tcs-discovery-500: #3b82f6;
        --tcs-discovery-300: #93c5fd;
        --tcs-discovery-100: #dbeafe;

        /* Design (Purple) - Creativity, planning, transformation */
        --tcs-design-900: #4c1d95;
        --tcs-design-700: #6d28d9;
        --tcs-design-500: #8b5cf6;
        --tcs-design-300: #c4b5fd;
        --tcs-design-100: #ede9fe;

        /* Sourcing (Amber) - Energy, procurement, action */
        --tcs-sourcing-900: #78350f;
        --tcs-sourcing-700: #b45309;
        --tcs-sourcing-500: #f59e0b;
        --tcs-sourcing-300: #fcd34d;
        --tcs-sourcing-100: #fef3c7;

        /* Production (Green) - Growth, progress, building */
        --tcs-production-900: #064e3b;
        --tcs-production-700: #047857;
        --tcs-production-500: #10b981;
        --tcs-production-300: #6ee7b7;
        --tcs-production-100: #d1fae5;

        /* Delivery (Teal) - Success, completion, satisfaction */
        --tcs-delivery-900: #134e4a;
        --tcs-delivery-700: #0f766e;
        --tcs-delivery-500: #14b8a6;
        --tcs-delivery-300: #5eead4;
        --tcs-delivery-100: #ccfbf1;
    }

    /* ============================================
       TCS WIZARD PHASE COLORS - Discovery Wizard
       All 5 steps use Discovery Blue palette (sub-stage gradient)
       Darkest (Step 1) to Lightest (Step 5)
       ============================================ */

    /* --- STEP 1: CUSTOMER INFO (Discovery Blue 900 - Deepest) --- */
    .fi-sc-wizard-header-step:nth-child(1).fi-active .fi-sc-wizard-header-step-icon-ctn,
    .fi-sc-wizard-header-step:nth-child(1).fi-completed .fi-sc-wizard-header-step-icon-ctn {
        background-color: var(--tcs-discovery-900) !important;
        border-color: var(--tcs-discovery-900) !important;
    }
    .fi-sc-wizard-header-step:nth-child(1).fi-active .fi-sc-wizard-header-step-label {
        color: var(--tcs-discovery-900) !important;
    }
    .fi-sc-wizard-header-step:nth-child(1):not(.fi-active):not(.fi-completed) .fi-sc-wizard-header-step-icon-ctn {
        border-color: var(--tcs-discovery-300) !important;
    }

    /* --- STEP 2: SCOPE & BUDGET (Discovery Blue 700 - Dark) --- */
    .fi-sc-wizard-header-step:nth-child(2).fi-active .fi-sc-wizard-header-step-icon-ctn,
    .fi-sc-wizard-header-step:nth-child(2).fi-completed .fi-sc-wizard-header-step-icon-ctn {
        background-color: var(--tcs-discovery-700) !important;
        border-color: var(--tcs-discovery-700) !important;
    }
    .fi-sc-wizard-header-step:nth-child(2).fi-active .fi-sc-wizard-header-step-label {
        color: var(--tcs-discovery-700) !important;
    }
    .fi-sc-wizard-header-step:nth-child(2):not(.fi-active):not(.fi-completed) .fi-sc-wizard-header-step-icon-ctn {
        border-color: var(--tcs-discovery-300) !important;
    }

    /* --- STEP 3: TIMELINE (Discovery Blue 500 - Base) --- */
    .fi-sc-wizard-header-step:nth-child(3).fi-active .fi-sc-wizard-header-step-icon-ctn,
    .fi-sc-wizard-header-step:nth-child(3).fi-completed .fi-sc-wizard-header-step-icon-ctn {
        background-color: var(--tcs-discovery-500) !important;
        border-color: var(--tcs-discovery-500) !important;
    }
    .fi-sc-wizard-header-step:nth-child(3).fi-active .fi-sc-wizard-header-step-label {
        color: var(--tcs-discovery-500) !important;
    }
    .fi-sc-wizard-header-step:nth-child(3):not(.fi-active):not(.fi-completed) .fi-sc-wizard-header-step-icon-ctn {
        border-color: var(--tcs-discovery-300) !important;
    }

    /* --- STEP 4: DOCUMENTS (Discovery Blue 300 - Light) --- */
    .fi-sc-wizard-header-step:nth-child(4).fi-active .fi-sc-wizard-header-step-icon-ctn,
    .fi-sc-wizard-header-step:nth-child(4).fi-completed .fi-sc-wizard-header-step-icon-ctn {
        background-color: var(--tcs-discovery-300) !important;
        border-color: var(--tcs-discovery-300) !important;
    }
    .fi-sc-wizard-header-step:nth-child(4).fi-active .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        color: var(--tcs-discovery-900) !important;
    }
    .fi-sc-wizard-header-step:nth-child(4).fi-active .fi-sc-wizard-header-step-label {
        color: var(--tcs-discovery-500) !important;
    }
    .fi-sc-wizard-header-step:nth-child(4):not(.fi-active):not(.fi-completed) .fi-sc-wizard-header-step-icon-ctn {
        border-color: var(--tcs-discovery-100) !important;
    }

    /* --- STEP 5: REVIEW & CREATE (Discovery Blue 100 - Lightest) --- */
    .fi-sc-wizard-header-step:nth-child(5).fi-active .fi-sc-wizard-header-step-icon-ctn,
    .fi-sc-wizard-header-step:nth-child(5).fi-completed .fi-sc-wizard-header-step-icon-ctn {
        background-color: var(--tcs-discovery-100) !important;
        border-color: var(--tcs-discovery-500) !important;
    }
    .fi-sc-wizard-header-step:nth-child(5).fi-active .fi-sc-wizard-header-step-icon-ctn .fi-icon,
    .fi-sc-wizard-header-step:nth-child(5).fi-completed .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        color: var(--tcs-discovery-700) !important;
    }
    .fi-sc-wizard-header-step:nth-child(5).fi-active .fi-sc-wizard-header-step-label {
        color: var(--tcs-discovery-700) !important;
    }
    .fi-sc-wizard-header-step:nth-child(5):not(.fi-active):not(.fi-completed) .fi-sc-wizard-header-step-icon-ctn {
        border-color: var(--tcs-discovery-100) !important;
    }

    /* Completed step icons - white checkmark (for dark backgrounds) */
    .fi-sc-wizard-header-step:nth-child(1).fi-completed .fi-sc-wizard-header-step-icon-ctn .fi-icon,
    .fi-sc-wizard-header-step:nth-child(2).fi-completed .fi-sc-wizard-header-step-icon-ctn .fi-icon,
    .fi-sc-wizard-header-step:nth-child(3).fi-completed .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        @apply text-white !important;
    }

    /* Completed step icons - dark checkmark (for light backgrounds) */
    .fi-sc-wizard-header-step:nth-child(4).fi-completed .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        color: var(--tcs-discovery-900) !important;
    }

    /* Active step icons - white by default */
    .fi-sc-wizard-header-step:nth-child(1).fi-active .fi-sc-wizard-header-step-icon-ctn .fi-icon,
    .fi-sc-wizard-header-step:nth-child(2).fi-active .fi-sc-wizard-header-step-icon-ctn .fi-icon,
    .fi-sc-wizard-header-step:nth-child(3).fi-active .fi-sc-wizard-header-step-icon-ctn .fi-icon {
        @apply text-white !important;
    }

    /* Progress bar under wizard header - Discovery blue gradient */
    .fi-sc-wizard-header::after {
        content: '';
        @apply absolute bottom-0 left-0 h-1;
        background: linear-gradient(
            to right,
            var(--tcs-discovery-900),
            var(--tcs-discovery-700),
            var(--tcs-discovery-500),
            var(--tcs-discovery-300),
            var(--tcs-discovery-100)
        );
        width: var(--wizard-progress, 0%);
        transition: width 0.3s ease-out;
    }

    /* ============================================
       TCS PHASE UTILITY CLASSES
       For use throughout the application
       ============================================ */

    /* Discovery phase backgrounds */
    .bg-tcs-discovery { background-color: var(--tcs-discovery-500); }
    .bg-tcs-discovery-dark { background-color: var(--tcs-discovery-700); }
    .bg-tcs-discovery-light { background-color: var(--tcs-discovery-300); }

    /* Design phase backgrounds */
    .bg-tcs-design { background-color: var(--tcs-design-500); }
    .bg-tcs-design-dark { background-color: var(--tcs-design-700); }
    .bg-tcs-design-light { background-color: var(--tcs-design-300); }

    /* Sourcing phase backgrounds */
    .bg-tcs-sourcing { background-color: var(--tcs-sourcing-500); }
    .bg-tcs-sourcing-dark { background-color: var(--tcs-sourcing-700); }
    .bg-tcs-sourcing-light { background-color: var(--tcs-sourcing-300); }

    /* Production phase backgrounds */
    .bg-tcs-production { background-color: var(--tcs-production-500); }
    .bg-tcs-production-dark { background-color: var(--tcs-production-700); }
    .bg-tcs-production-light { background-color: var(--tcs-production-300); }

    /* Delivery phase backgrounds */
    .bg-tcs-delivery { background-color: var(--tcs-delivery-500); }
    .bg-tcs-delivery-dark { background-color: var(--tcs-delivery-700); }
    .bg-tcs-delivery-light { background-color: var(--tcs-delivery-300); }

    /* Phase text colors */
    .text-tcs-discovery { color: var(--tcs-discovery-500); }
    .text-tcs-design { color: var(--tcs-design-500); }
    .text-tcs-sourcing { color: var(--tcs-sourcing-500); }
    .text-tcs-production { color: var(--tcs-production-500); }
    .text-tcs-delivery { color: var(--tcs-delivery-500); }

    /* Phase border colors */
    .border-tcs-discovery { border-color: var(--tcs-discovery-500); }
    .border-tcs-design { border-color: var(--tcs-design-500); }
    .border-tcs-sourcing { border-color: var(--tcs-sourcing-500); }
    .border-tcs-production { border-color: var(--tcs-production-500); }
    .border-tcs-delivery { border-color: var(--tcs-delivery-500); }
}

/* ============================================
   TWO-COLUMN LAYOUT RESPONSIVE UTILITIES
   For Project Wizard and similar pages
   These are defined outside @layer to ensure they're always compiled
   ============================================ */

/* XL breakpoint (1280px+) responsive utilities */
@media (min-width: 1280px) {
    .xl\:flex-row {
        flex-direction: row !important;
    }

    .xl\:items-start {
        align-items: flex-start !important;
    }

    .xl\:gap-6 {
        gap: 1.5rem !important;
    }

    .xl\:w-80 {
        width: 20rem !important;
    }

    .xl\:max-w-xs {
        max-width: 20rem !important;
    }

    .xl\:flex-shrink-0 {
        flex-shrink: 0 !important;
    }

    .xl\:sticky {
        position: sticky !important;
    }

    .xl\:top-20 {
        top: 5rem !important;
    }
}

/* Base utilities that should always be available */
.flex-1 {
    flex: 1 1 0% !important;
}

.min-w-0 {
    min-width: 0 !important;
}

.gap-4 {
    gap: 1rem !important;
}
